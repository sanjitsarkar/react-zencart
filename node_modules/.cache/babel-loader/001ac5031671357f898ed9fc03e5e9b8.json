{"ast":null,"code":"var _jsxFileName = \"/home/xanjit/Desktop/neog/react-ecom/src/context/auth/auth-context.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport axios from 'axios';\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\n\nconst AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [isLogin, setIsLogin] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState({\n    hasError: false,\n    errorMessage: ''\n  });\n  const [user, setUser] = useState(null);\n\n  const toggleIsLogin = () => {\n    setIsLogin(prevIsLogin => !prevIsLogin);\n  };\n\n  const errorHandler = (hasError, message) => {\n    setError({\n      hasError: hasError,\n      errorMessage: message\n    });\n  };\n\n  const loginHandler = async user => {\n    setIsLoading(true);\n\n    try {\n      const response = await axios.post('/api/auth/login', {\n        email: user.email,\n        password: user.password\n      });\n\n      if (response.statusText) {\n        localStorage.setItem('token', response.data.encodedToken);\n        setIsLogin(true);\n        setIsLoading(false);\n        errorHandler(false, '');\n        setUser(response.data.foundUser);\n        return true;\n      }\n    } catch (e) {\n      console.log(e.response);\n      errorHandler(true, e.response.data.errors[0]);\n      setIsLoading(false);\n    }\n  };\n\n  const signUpHandler = async user => {\n    setIsLoading(prev => prev = true);\n\n    try {\n      const response = await axios.post('/api/auth/signup', {\n        email: user.email,\n        password: user.password\n      });\n\n      if (response) {\n        setIsLoading(false);\n        setIsLogin(true);\n        errorHandler(false, '');\n      }\n\n      setIsLoading(false);\n    } catch (e) {\n      console.log(e.response);\n      errorHandler(true, e.response.data.errors[0]);\n      setIsLoading(false);\n    }\n  };\n\n  const logoutHandler = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n    setIsLogin(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isLogin,\n      isLoading,\n      error,\n      user,\n      toggleIsLogin,\n      signUpHandler,\n      loginHandler,\n      logoutHandler,\n      errorHandler\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 3\n  }, this);\n};\n\n_s(AuthProvider, \"t8WUh6O11k3AKeuv++Wm/NDRg5Y=\");\n\n_c = AuthProvider;\n\nconst useAuth = () => {\n  _s2();\n\n  return useContext(AuthContext);\n};\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport { AuthProvider, useAuth };\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/home/xanjit/Desktop/neog/react-ecom/src/context/auth/auth-context.jsx"],"names":["axios","createContext","useContext","useState","useEffect","AuthContext","AuthProvider","children","isLogin","setIsLogin","isLoading","setIsLoading","error","setError","hasError","errorMessage","user","setUser","toggleIsLogin","prevIsLogin","errorHandler","message","loginHandler","response","post","email","password","statusText","localStorage","setItem","data","encodedToken","foundUser","e","console","log","errors","signUpHandler","prev","logoutHandler","removeItem","useAuth"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { createContext, useContext, useState, useEffect } from 'react';\n\nconst AuthContext = createContext(null);\n\nconst AuthProvider = ({ children }) => {\n\tconst [isLogin, setIsLogin] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [error, setError] = useState({ hasError: false, errorMessage: '' });\n\tconst [user, setUser] = useState(null);\n\n\tconst toggleIsLogin = () => {\n\t\tsetIsLogin((prevIsLogin) => !prevIsLogin);\n\t};\n\n\tconst errorHandler = (hasError, message) => {\n\t\tsetError({ hasError: hasError, errorMessage: message });\n\t};\n\n\tconst loginHandler = async (user) => {\n\t\tsetIsLoading(true);\n\t\ttry {\n\t\t\tconst response = await axios.post('/api/auth/login', {\n\t\t\t\temail: user.email,\n\t\t\t\tpassword: user.password,\n\t\t\t});\n\t\t\tif (response.statusText) {\n\t\t\t\tlocalStorage.setItem('token', response.data.encodedToken);\n\t\t\t\tsetIsLogin(true);\n\t\t\t\tsetIsLoading(false);\n\t\t\t\terrorHandler(false, '');\n\t\t\t\tsetUser(response.data.foundUser);\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(e.response);\n\t\t\terrorHandler(true, e.response.data.errors[0]);\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\tconst signUpHandler = async (user) => {\n\t\tsetIsLoading((prev) => (prev = true));\n\t\ttry {\n\t\t\tconst response = await axios.post('/api/auth/signup', {\n\t\t\t\temail: user.email,\n\t\t\t\tpassword: user.password,\n\t\t\t});\n\t\t\tif (response) {\n\t\t\t\tsetIsLoading(false);\n\t\t\t\tsetIsLogin(true);\n\t\t\t\terrorHandler(false, '');\n\t\t\t}\n\t\t\tsetIsLoading(false);\n\t\t} catch (e) {\n\t\t\tconsole.log(e.response);\n\t\t\terrorHandler(true, e.response.data.errors[0]);\n\n\t\t\tsetIsLoading(false);\n\t\t}\n\t};\n\n\tconst logoutHandler = () => {\n\t\tlocalStorage.removeItem('token');\n\t\tsetUser(null);\n\t\tsetIsLogin(false);\n\t};\n\n\treturn (\n\t\t<AuthContext.Provider value={{ isLogin, isLoading, error, user, toggleIsLogin, signUpHandler, loginHandler, logoutHandler, errorHandler }}>\n\t\t\t{children}\n\t\t</AuthContext.Provider>\n\t);\n};\n\nconst useAuth = () => useContext(AuthContext);\n\nexport { AuthProvider, useAuth };\n"]},"metadata":{},"sourceType":"module"}